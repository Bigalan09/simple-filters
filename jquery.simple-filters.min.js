(function(e){e.fn.simpleFilters=function(t){return this.each(function(){var n=e(this);$options=t||{};$options=e.extend({},e.fn.simpleFilters.options,t);$filters=new Array("---","---");$rows=n.find("tbody tr");if($options.external){e.each(t.external,function(t,r){var i=new Array;$rows.each(function(){var t=e(this).find("td:eq("+r.column+")").text();if(!(t in i))i[t]=t});$select=e("<select />");$select.attr("id","filter-"+r.column);for(var s in i){$select.append("<option>"+s+"</option>")}$opt=$select.find("option");switch(r.type){case"date":$opt.sort(function(e,t){return new Date(e.text)-new Date(t.text)});break;case"numeric":case"number":$opt.sort(function(e,t){if(Number(e.text)>Number(t.text))return 1;else if(Number(e.text)<Number(t.text))return-1;else return 0});break;case"string":case"text":$opt.sort(function(e,t){if(e.text>t.text)return 1;else if(e.text<t.text)return-1;else return 0});break}$select=$select.empty().append($opt);$select.prepend("<option>---</option>");$select.find("option:first-child").attr("selected","selected");$select.on("change",function(){n.trigger("beforetablefilter",{});$selected=e(this).find(":selected").text();$col=e(this).attr("id").replace("filter-","");$filters[$col]=$selected;$search=new Array;setTimeout(function(){e.each($filters,function(e,t){if(t!=="---")$search[e]=t});$rows.show().find(".arrow").remove();setTimeout(function(){e.each($rows,function(t,n){$row=e(this);e.each($search,function(e,t){if(t!==undefined){$column=$row.find("td:eq("+e+")").text();if($column.match("^"+t+"$")===null)$row.hide()}})});e.fn.filter.updateSelect($options,n.find("tbody tr:visible"),$col);n.trigger("aftertablefilter",{})},1)},1)});e(r.placeholder).append($select)})}})};e.fn.filter.updateSelect=function(t,n,r){if(t.external){e.each(t.external,function(t,r){$previousSelect=e("#filter-"+t).find(":selected").val();$select=e("#filter-"+t);var i=new Array;n.each(function(){var t=e(this).find("td:eq("+r.column+")").text();if(!(t in i))i[t]=t});$select.empty();for(var s in i){$select.append("<option>"+s+"</option>")}$opt=$select.find("option");switch(r.type){case"date":$opt.sort(function(e,t){return moment(t.text).toDate()-moment(e.text).toDate()});break;case"numeric":$opt.sort(function(e,t){if(Number(e.text)>Number(t.text))return 1;else if(Number(e.text)<Number(t.text))return-1;else return 0});break;case"string":$opt.sort(function(e,t){if(e.text>t.text)return 1;else if(e.text<t.text)return-1;else return 0});break}$select=$select.empty().append($opt);$select.prepend("<option>---</option>");if($previousSelect==="---")$select.find("option:first-child").attr("selected","selected");else $select.val($previousSelect)})}};e.fn.simpleFilters.options={}})(jQuery)
